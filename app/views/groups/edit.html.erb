<%= link_to '<i class="fa fa-chevron-left"></i> Back to Group Index'.html_safe, groups_path, :class => 'btn btn-primary'%>
<h1><%= group.title %> Management</h1>

<h2>Currently assigned slideshows</h2>

<table class="table table-bordered table-striped table-hover">
  <tr>
    <th>Title</th>
    <th>Release Day</th>
    <th></th>
  </tr>
  <% group_slideshow_joins.each do |s|%>
    <tr>
      <td><%= s.bit_player_slideshow.title %></td>
      <td><%= s.release_day %></td>
      <td><%= link_to "remove", group_slideshow_join_path(s), method: :delete, :class => "btn btn-primary destroy", remote: true %></td>
    </tr>
  <% end %>
</table>

<h1>Assign New Slideshow</h1>
<%= form_for group_slideshow_join, as: :group_slideshow_join, url: groups_path, html: {role: "form"} do |f| %>
  <div class="form-group">
  <%= f.label :bit_player_slideshow_id, "Select Slideshow" %><br/>
  <%= f.select :bit_player_slideshow_id, slideshows.collect {|s| [ s.title, s.id ] }, {}, class: "form-control" %>
</div>
<%= f.hidden_field :group_id, :value => group.id %>
<div class="form-group">
  <%= f.label :release_day, "Select number of days into intervention to make available" %><br/>
  <%= f.number_field :release_day, class: "form-control" %>
</div>
  <%= f.submit "Save", class: "btn btn-primary" %>
  <%= link_to "Cancel", slideshows_path, class: "btn btn-default" %>
<% end %>

<script>
  $('.destroy').on("click", function (ev){
    ev.preventDefault();
    var yes = confirm("Are you sure you want to remove this slideshow?");
    if (yes == true){
      $(this).parent().parent().hide();
    }
  });
</script>